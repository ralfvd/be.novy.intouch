<script>
var options = {
	template: '../../drivers/lib/pair/test_button.html',
	id: 'generic_test_button_2',
	next: 'generic_done',
	initWithDeviceData: true,
	sendToggleOnInit: false,
	svg: '<?xml version="1.0" standalone="no"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN"\n "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">\n<svg version="1.0" xmlns="http://www.w3.org/2000/svg"\n width="300.000000pt" height="120.000000pt" viewBox="0 0 300.000000 120.000000"\n preserveAspectRatio="xMidYMid meet">\n<metadata>\nCreated by potrace 1.10, written by Peter Selinger 2001-2011\n</metadata>\n<g transform="translate(0.000000,120.000000) scale(0.100000,-0.100000)"\nfill="#000000" stroke="none">\n<path d="M231 834 c2 -5 59 -109 127 -230 l122 -221 999 -1 999 0 113 196 c62\n109 121 212 132 230 l20 33 -124 -5 c-68 -2 -131 -5 -139 -6 -17 -2 -13 7\n-127 -237 l-86 -183 -772 0 c-426 0 -779 -2 -787 -5 -10 -4 -36 49 -93 182\n-43 104 -86 199 -94 212 -15 23 -14 24 6 12 16 -8 276 -11 972 -11 839 0 951\n2 951 15 0 13 -111 15 -937 15 -516 0 -1016 3 -1112 7 -105 4 -172 3 -170 -3z\nm183 -286 c37 -71 65 -128 62 -128 -6 0 -202 367 -211 395 -8 22 47 -76 149\n-267z m61 242 c26 -53 175 -388 175 -392 0 -2 -33 -2 -73 0 l-73 3 -112 210\nc-62 115 -112 210 -112 212 0 1 40 2 89 2 l90 0 16 -35z m2215 34 c0 -1 -45\n-83 -100 -183 -97 -174 -117 -216 -85 -175 14 17 14 15 0 -13 -16 -33 -29 -46\n-19 -18 5 12 1 13 -25 4 -30 -11 -60 -9 -106 6 -20 7 -20 7 0 -10 14 -11 34\n-15 66 -13 32 2 45 -1 42 -9 -4 -9 -136 -24 -151 -17 -1 1 43 98 99 216 l102\n216 88 -2 c49 0 89 -2 89 -2z m19 -16 c-29 -57 -181 -318 -185 -318 -6 0 0 10\n89 170 79 142 95 170 103 170 2 0 -1 -10 -7 -22z m-2180 -61 c11 -26 18 -47\n15 -47 -5 0 -44 86 -44 97 0 12 9 -4 29 -50z"/>\n<path d="M348 793 c-9 -2 -19 -11 -22 -19 -6 -17 5 -19 21 -3 6 6 33 10 62 8\n43 -3 49 -2 34 9 -16 12 -61 14 -95 5z"/>\n<path d="M456 744 c-11 -7 -17 -16 -15 -19 3 -3 14 2 25 9 10 8 17 17 14 19\n-3 3 -14 -1 -24 -9z"/>\n<path d="M350 731 c8 -6 28 -11 44 -11 39 0 31 6 -19 14 -29 5 -36 4 -25 -3z"/>\n<path d="M446 632 c-3 -5 4 -16 15 -25 10 -9 19 -23 19 -32 0 -8 9 -19 20 -25\n24 -13 28 5 3 18 -9 5 -17 18 -18 28 -2 35 -26 57 -39 36z"/>\n<path d="M504 475 c-10 -7 0 -9 36 -7 27 2 47 8 44 13 -7 12 -62 8 -80 -6z"/>\n<path d="M590 440 c-13 -8 -13 -10 2 -10 9 0 20 5 23 10 8 13 -5 13 -25 0z"/>\n<path d="M505 430 c3 -5 19 -10 36 -10 16 0 29 5 29 10 0 6 -16 10 -36 10 -21\n0 -33 -4 -29 -10z"/>\n<path d="M2527 783 c-3 -4 13 -9 36 -9 23 0 51 -4 62 -8 16 -7 18 -6 8 4 -14\n15 -98 26 -106 13z"/>\n<path d="M2490 747 c0 -20 22 -27 83 -26 l52 2 -51 6 c-28 3 -59 12 -68 20\n-14 11 -16 11 -16 -2z"/>\n<path d="M2475 590 c-3 -5 -1 -10 4 -10 6 0 11 5 11 10 0 6 -2 10 -4 10 -3 0\n-8 -4 -11 -10z"/>\n<path d="M2373 475 c-16 -12 -13 -13 23 -8 24 3 51 0 65 -7 22 -11 23 -11 8 4\n-20 22 -73 28 -96 11z"/>\n</g>\n</svg>\n',
	title: 'Test the lights',
	body: 'Press the test button ; your lights should toggle on/off',
	svgWidth: '80vw',
	svgHeight: '70vh',
	previous: true,
	buttonLabel: 'test'
};
Homey.setTitle(__(options.title || ''));
Homey.emit('init', options.id);
Homey.on('show_view', function(viewId){
	Homey.showView(viewId);
});
Homey.on('close', function(){
	Homey.close();
});
Homey.on('nextView', function(viewsIds){
	var viewIndex = viewsIds.indexOf(options.id) + 1;
	if(viewIndex > 0 && viewIndex < viewsIds.length){
		Homey.showView(viewsIds[viewIndex]);
	}
});
Homey.on('previousView', function(viewsIds){
	var viewIndex = viewsIds.indexOf(options.id) - 1;
	if(viewIndex >= 0){
		Homey.showView(viewsIds[viewIndex]);
	}
});
function nextView(){
	if(options.next){
		Homey.nextView();
	}else{
		Homey.emit('next');
	}
}
</script>

<link href="../../../assets/433_generator/css/styles.css" rel="stylesheet" type="text/css"/>

<link href="../../../assets/433_generator/css/svg.css" rel="stylesheet" type="text/css"/>

<script src="../../../assets/433_generator/js/svghighlighter.js" type="text/javascript"></script>

<link href="../../../assets/433_generator/css/styles.css" rel="stylesheet" type="text/css"/>

<link href="../../../assets/433_generator/css/svg.css" rel="stylesheet" type="text/css"/>

<script src="../../../assets/433_generator/js/svghighlighter.js" type="text/javascript"></script>

<link href="../../../assets/433_generator/css/styles.css" rel="stylesheet" type="text/css"/>

<link href="../../../assets/433_generator/css/svg.css" rel="stylesheet" type="text/css"/>

<script src="../../../assets/433_generator/js/svghighlighter.js" type="text/javascript"></script>

<div class="centered-container">
	<div id="image-container" class="toggle-pulse"></div>
	<div id="button-container">
		<button id="test_button" class="button"></button>
	</div>
	<div id="body"><span class="content"></span></div>
</div>

<script>
	var idPrefix = '[data-id="' + options.id + '"] ';
	$(idPrefix + '#body > span').html(__(options.body));
	var $imageContainer = $(idPrefix + '#image-container');
	$imageContainer.css('width', options.svgWidth).css('height', options.svgHeight);
	var $testButton = $(idPrefix + '#test_button');

	$imageContainer.html(options.svg);
	$testButton.html(__(options.buttonLabel));
	Homey.emit('test', function (err, device) {
		if (err) {
			Homey.alert(__(err.message || err));
			return;
		}

		$testButton.on('click', () => Homey.emit('toggle'));
		$imageContainer.highlight(device, options.initWithDeviceData ? device.data : false);
		if (options.sendToggleOnInit) {
			Homey.emit('toggle');
		}
	});
</script>
<script>
var options = {
	template: '../lib/pair/test_button.html',
	id: 'generic_test_button_2',
	next: 'generic_done',
	initWithDeviceData: true,
	sendToggleOnInit: false,
	svg: '<?xml version="1.0" encoding="utf-8"?>\n<!-- Generator: Adobe Illustrator 17.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t width="746.504px" height="577.839px" viewBox="0 0 746.504 577.839" enable-background="new 0 0 746.504 577.839"\n\t xml:space="preserve" xmlns:pulse="-">\n<g>\n\t<path d="M533.508,316.264c0.198-8.366,0.71-15.685,0.5-24.479c-1.66-69.379-53.663-126.033-120.013-142.982\n\t\tc-0.439-19.516-18.588-34.941-41.213-34.941c-22.568,0-40.923,15.556-41.451,35.003c0,0.026-0.001,0.052-0.002,0.079\n\t\tc-66.206,17.043-118.116,73.568-119.773,142.84c-0.21,8.794,0.302,16.112,0.5,24.479c1.478,62.59-17.1,125.292-55.896,187.648\n\t\tc-8.845,14.216-9.597,14.186,1.868,16.565c54.438,11.295,118.934,17.682,184.744,19.168c-0.001,0.105-0.001,0.21-0.001,0.315\n\t\tc0,20.92,16.959,37.879,37.879,37.879c20.92,0,37.879-16.959,37.879-37.879c0-0.255-0.003-0.51-0.008-0.765\n\t\tc60.338-2.089,118.951-8.33,169.016-18.718c11.465-2.379,10.712-2.349,1.868-16.565\n\t\tC550.608,441.556,532.029,378.855,533.508,316.264z M418.029,525.03c-24.965,0.864-49.965,1.009-74.939,0.445\n\t\tc-38.029-0.859-76.955-3.254-115.351-7.978c-4.972-0.612-9.934-1.262-14.885-1.953c-14.403-2.012-28.706-4.369-42.83-7.114\n\t\tc35.86-58.591,57.836-123.168,56.198-192.501c-0.188-7.944-0.69-15.853-0.499-23.805c1.511-63.185,49.401-114.076,109.137-129.454\n\t\tl4.508-1.161c10.963-2.454,22.168-3.676,33.411-3.676c12.715,0,25.386,1.557,37.707,4.703\n\t\tc59.878,15.288,107.836,66.313,109.35,129.588c0.19,7.952-0.312,15.862-0.499,23.805c-1.638,69.333,20.339,133.91,56.199,192.5\n\t\tC524.012,518.438,470.3,523.221,418.029,525.03z"/>\n</g>\n<path fill="#FFFFFF" d="M575.537,508.43c-35.86-58.59-57.836-123.168-56.199-192.5c0.188-7.944,0.69-15.853,0.499-23.805\n\tc-1.514-63.276-49.472-114.3-109.35-129.588c-12.321-3.146-24.992-4.703-37.707-4.703c-11.243,0-22.449,1.223-33.411,3.676\n\tl-4.508,1.16c-59.736,15.378-107.626,66.269-109.137,129.454c-0.19,7.952,0.312,15.861,0.499,23.805\n\tc1.638,69.333-20.339,133.91-56.199,192.501c14.124,2.744,28.426,5.101,42.83,7.114c2.587-5.038,4.642-9.075,5.033-9.957\n\tc8.314-18.799,15.36-38.058,21.137-57.774c5.808-19.822,10.38-40.196,13.713-61.119c1.501-9.422,2.694-18.098,3.476-26.718\n\tc0.78-8.605,1.161-17.223,1.044-26.568c-0.328-26.177,2.426-49.672,8.261-70.483c5.905-21.062,14.969-39.419,27.193-55.071\n\tl11.128,8.692c-11.053,14.153-19.288,30.886-24.702,50.199c-5.485,19.564-8.072,41.73-7.762,66.497\n\tc0.123,9.861-0.278,18.945-1.099,28.007c-0.82,9.048-2.049,18.007-3.587,27.659c-3.426,21.501-8.126,42.447-14.1,62.836\n\tc-6.006,20.496-13.255,40.346-21.746,59.546c-0.309,0.699-1.484,3.034-3.103,6.207c38.396,4.724,77.322,7.119,115.351,7.978\n\tc24.974,0.564,49.973,0.419,74.939-0.445C470.3,523.221,524.012,518.438,575.537,508.43"/>\n\t<g pulse:state="1"  fill="#FFFFFF">\n<path d="M211.79,73.764l-21.083-24.713C116.43,89.182,65.471,165.147,63.375,252.739\n\tc-0.196,8.187,0.179,16.103,0.371,24.248c0.064,2.699,0.003,5.383-0.172,8.051l23.966,4.186c0-0.813-0.005-1.634-0.015-2.461\n\tc-0.244-19.494,1.807-36.99,6.151-52.488c1.44-5.137,3.133-10.057,5.078-14.762C111.309,155.899,154.103,102.66,211.79,73.764z"/>\n<path d="M682.777,253.531c-2.091-87.427-52.565-163.369-126.34-203.964L535.268,74.38\n\tc67.154,34.379,113.809,101.745,115.678,179.913c0.185,7.714-0.192,15.192-0.373,22.87c-0.118,4.976,0.072,9.899,0.539,14.767\n\tl31.493-5.501c-0.197-2.821-0.269-5.659-0.202-8.514C682.597,269.723,682.974,261.764,682.777,253.531z"/>\n<path d="M31.72,251.982c2.316-96.803,57.15-181.273,138.022-227.504L148.86,0\n\tC60.024,53.039,2.565,146.744,0.066,251.224c-0.182,7.605,0.049,15.176,0.255,22.765l31.784,5.552\n\tc0.005-0.602,0.001-1.204-0.013-1.806C31.887,269.08,31.513,260.682,31.72,251.982z"/>\n<path d="M746.438,252.008C743.939,147.579,686.855,53.829,598.453,0.316l-20.967,24.578\n\tc80.413,46.698,134.809,131.184,137.122,227.876c0.209,8.749-0.167,17.194-0.373,25.896c-0.018,0.746-0.019,1.493-0.007,2.239\n\tl31.943-5.58C746.38,267.551,746.624,259.798,746.438,252.008z"/>\n<path d="M157.427,301.432c1.047-8.759,1.497-17.657,1.284-26.688c-0.156-6.609-0.53-13.106-0.372-19.734\n\tc1.428-59.703,41.297-109.682,95.408-130.642c0.153-0.294,0.309-0.586,0.467-0.876l-21.447-25.14\n\tc-0.179,0.243-0.358,0.486-0.534,0.731c-60.696,27.654-103.901,86.288-105.548,155.17c-0.171,7.151,0.203,14.115,0.372,21.238\n\tc0.163,6.92-0.146,13.748-0.878,20.482L157.427,301.432z"/>\n<path d="M618.743,276.41c0.169-7.163,0.546-14.165,0.374-21.356c-1.649-68.92-44.644-127.671-105.191-155.658\n\tl-21.636,25.361c53.947,21.288,93.568,71.357,94.996,131.058c0.159,6.665-0.217,13.198-0.374,19.843\n\tc-0.218,9.224,0.254,18.309,1.342,27.251l31.416-5.488C618.901,290.516,618.575,283.511,618.743,276.41z"/>\n\t</g>\n</svg>\n',
	title: 'deviceClasses.doorbell.views.generic_test_button.title',
	body: 'deviceClasses.doorbell.views.generic_test_button_2.body',
	svgWidth: '80vw',
	svgHeight: '70vh',
	previous: true,
	buttonLabel: 'test'
};
Homey.setTitle(__(options.title || ''));
Homey.emit('init', options.id);
Homey.on('show_view', function(viewId){
	Homey.showView(viewId);
});
Homey.on('close', function(){
	Homey.close();
});
Homey.on('nextView', function(viewsIds){
	var viewIndex = viewsIds.indexOf(options.id) + 1;
	if(viewIndex > 0 && viewIndex < viewsIds.length){
		Homey.showView(viewsIds[viewIndex]);
	}
});
Homey.on('previousView', function(viewsIds){
	var viewIndex = viewsIds.indexOf(options.id) - 1;
	if(viewIndex >= 0){
		Homey.showView(viewsIds[viewIndex]);
	}
});
function nextView(){
	if(options.next){
		Homey.nextView();
	}else{
		Homey.emit('next');
	}
}
</script>

<link href="../../../assets/433_generator/css/styles.css" rel="stylesheet" type="text/css"/>

<link href="../../../assets/433_generator/css/svg.css" rel="stylesheet" type="text/css"/>

<script src="../../../assets/433_generator/js/svghighlighter.js" type="text/javascript"></script>

<link href="../../../assets/433_generator/css/styles.css" rel="stylesheet" type="text/css"/>

<link href="../../../assets/433_generator/css/svg.css" rel="stylesheet" type="text/css"/>

<script src="../../../assets/433_generator/js/svghighlighter.js" type="text/javascript"></script>

<link href="../../../assets/433_generator/css/styles.css" rel="stylesheet" type="text/css"/>

<link href="../../../assets/433_generator/css/svg.css" rel="stylesheet" type="text/css"/>

<script src="../../../assets/433_generator/js/svghighlighter.js" type="text/javascript"></script>

<div class="centered-container">
	<div id="image-container" class="toggle-pulse"></div>
	<div id="button-container">
		<button id="test_button" class="button"></button>
	</div>
	<div id="body"><span class="content"></span></div>
</div>

<script>
	var idPrefix = '[data-id="' + options.id + '"] ';
	$(idPrefix + '#body > span').html(__(options.body));
	var $imageContainer = $(idPrefix + '#image-container');
	$imageContainer.css('width', options.svgWidth).css('height', options.svgHeight);
	var $testButton = $(idPrefix + '#test_button');

	$imageContainer.html(options.svg);
	$testButton.html(__(options.buttonLabel));
	Homey.emit('test', function (err, device) {
		if (err) {
			Homey.alert(__(err.message || err));
			return;
		}

		$testButton.on('click', () => Homey.emit('toggle'));
		$imageContainer.highlight(device, options.initWithDeviceData ? device.data : false);
		if (options.sendToggleOnInit) {
			Homey.emit('toggle');
		}
	});
</script>